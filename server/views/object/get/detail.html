<body>
    <h1>분실물 상세 정보</h1>

    <div id="detail-container">
        <p>Loading...</p>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const container = document.getElementById('detail-container');
            const segments = window.location.pathname.split('/');
            const postId = segments[segments.length - 1];

            if (!postId || !container) {
                console.error('Missing ID or container element.');
                container.innerHTML = '<p>Invalid access</p>';
                return;
            }

            fetch(`/api/object/get/detail/${postId}`)
                .then(res => {
                    if (!res.ok) throw new Error('Post not found');
                    return res.json();
                })
                .then(result => {
                    container.innerHTML = `
                      <p><strong>사용자:</strong> ${result.user_id || '-'}</p>
                      <p><strong>게시 날짜:</strong> ${result.date || '-'}</p>
                      <p><strong>관리 ID:</strong> ${result.atcId || '-'}</p>
                      <p><strong>물품명:</strong> ${result.fdPrdtNm || '정보 없음'}</p>
                      <p><strong>습득 일시:</strong> ${result.fdYmd || '-'} ${result.fdHor || ''}</p>
                      <p><strong>습득 장소:</strong> ${result.fdPlace || '-'}</p>
                      <p><strong>특이사항:</strong> ${result.uniq || '-'}</p>
                      <p><strong>습득 순번:</strong> ${result.fdSn || '-'}</p>
                      <p><strong>물품분류명:</strong> ${result.prdtClNm || '-'}</p>
                      <p><strong>보관 장소:</strong> ${result.depPlace || '-'}</p>
                      <p><strong>보관상태명명:</strong> ${result.csteSteNm || '-'}</p>
                      <p><strong>기관명:</strong> ${result.orgNm || '-'}</p>
                      <p><strong>기관ID:</strong> ${result.orgId || '-'}</p>
                      <p><strong>전화번호:</strong> ${result.tel || '-'}</p>
                      <p><strong>습득물보관기관구분명:</strong> ${result.fndKeepOrgnSeNm || '-'}</p>                      
                      ${result.fdFilePathImg ? `<img src="${result.fdFilePathImg}" width="200">` : '<p>이미지 없음</p>'}
                      <br><br>
                      <a href="/object/get/1">← 목록으로 돌아가기</a>
                  `;
                })
                .catch(err => {
                    console.error('Error loading post:', err.message);
                    container.innerHTML = '<p>Post not found or server error.</p>';
                });
        });
    </script>
</body>